(self.webpackChunkdevto_clone_client=self.webpackChunkdevto_clone_client||[]).push([[478],{3943:function(e,n,t){"use strict";var a=t(4942),i=t(1413),r=t(7762),s=t(9439),o=t(2791);n.Z=function(e){var n=(0,o.useState)(e),t=(0,s.Z)(n,2),l=t[0],c=t[1],u=(0,o.useCallback)((function(e){var n,t=(0,r.Z)(e.validationRules);try{for(t.s();!(n=t.n()).done;){var a=n.value;if(!a.validate(e.value,l))return e.errorMessage=a.message,!1}}catch(i){t.e(i)}finally{t.f()}return!0}),[l]),d=(0,o.useCallback)((function(e){var n=e.target,t=n.name,r=n.value,s=(0,i.Z)((0,i.Z)({},l[t]),{},{value:r}),o=u(s);o&&!s.valid?s=(0,i.Z)((0,i.Z)({},s),{},{valid:!0}):s.touched||o||!s.valid||(s=(0,i.Z)((0,i.Z)({},s),{},{valid:!1})),s=(0,i.Z)((0,i.Z)({},s),{},{touched:!0}),c((0,i.Z)((0,i.Z)({},l),{},(0,a.Z)({},t,s)))}),[l,u]),f=(0,o.useCallback)((function(e,n,t){c((0,i.Z)((0,i.Z)({},l),{},(0,a.Z)({},e,(0,i.Z)((0,i.Z)({},l[e]),{},{value:n,valid:t}))))}),[l]);return{renderFormInputs:function(){return Object.values(l).map((function(e){var n=e.value,t=e.label,a=e.errorMessage,i=e.valid;return(0,e.renderInput)(d,n,i,a,t,f)}))},renderFormValues:function(){var e={};return Object.keys(l).forEach((function(n){e[n]=l[n].value})),e},isFormValid:(0,o.useCallback)((function(e){for(var n=!0,t=Object.values(e||l),a=0;a<t.length;a++)if(!t[a].valid){n=!1;break}return n}),[l]),setForm:c}}},1173:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return S}});var a=t(1413),i=t(5861),r=t(7757),s=t.n(r),o=t(2791),l=t(1523),c=t(9271),u=t(8241),d=t(6545),f=t(9439),p=t(929),v=t(7216),m=t(184),h=function(e){var n=(0,o.useState)(!0),t=(0,f.Z)(n,2),a=t[0],i=t[1],r=(0,d.Z)().setError;return(0,m.jsx)("div",{className:"auth__google",children:a&&(0,m.jsx)(p.GoogleLogin,{clientId:"945245292087-6290oo3l665flioomq0le8o76l770rle.apps.googleusercontent.com",render:function(e){return(0,m.jsxs)("button",{className:"btn btn__social",onClick:e.onClick,disabled:e.disabled,children:[(0,m.jsx)("i",{children:(0,m.jsx)(v.J,{})}),(0,m.jsx)("span",{children:"Continue with Google"})]})},buttonText:"Login",onSuccess:function(n){e.onLogin(n),i(!1)},onFailure:function(e){r("Login with Google failed. Please try again!",e)},cookiePolicy:"single_host_origin"})})},g=t(4649),Z=t.n(g),x=t(8762),j=function(e){var n=(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("i",{children:(0,m.jsx)(x.R,{})}),(0,m.jsx)("span",{children:"Continue with GitHub"})]});return(0,m.jsx)(Z(),{className:"btn btn__social btn--gh",buttonText:n,clientId:"29898b8f9edbc6521e68",onSuccess:function(n){console.log(n),e.onLogin(n)},onFailure:function(e){console.log(e)}})},b=t(3943),k=t(832),_=t(2703),y=function(){return(0,m.jsxs)("div",{className:"welcome",children:[(0,m.jsx)("h2",{className:"welcome__title",children:"Welcome to DEV Community"}),(0,m.jsxs)("p",{className:"welcome__slogan",children:[(0,m.jsx)(l.rU,{to:"/",children:"DEV Community"})," is a community of 748,239 amazing developers"]})]})},w=t(441),C=t(6132),R=t.n(C),N=t(5305),L=function(e){var n=function(){var n=(0,i.Z)(s().mark((function n(t){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.onLogin(t);case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return(0,m.jsx)(R(),{appId:"997534277524543",autoLoad:!1,callback:n,render:function(e){return(0,m.jsxs)("button",{className:"btn btn__social btn--fb",onClick:e.onClick,children:[(0,m.jsx)("i",{children:(0,m.jsx)(N.s,{})}),(0,m.jsx)("span",{children:"Continue with Facebook"})]})}})},T=t(2164),I=function(e){var n=function(){var e=(0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.open("".concat("https://devfrom.herokuapp.com/api","/users/auth/twitter"),"_self");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,m.jsxs)("button",{className:"btn btn__social btn--tw",onClick:n,children:[(0,m.jsx)("i",{children:(0,m.jsx)(T.h,{})}),"Continue with Twitter"]})},S=function(e){var n=e.newUser,t=(0,b.Z)(k.L),r=t.renderFormInputs,f=t.renderFormValues,p=t.isFormValid,v=t.setForm;(0,o.useEffect)((function(){v(n?k.L:k.B5)}),[n,v]);var g=f(),Z=r(),x=(0,o.useContext)(u.V).login,C=(0,c.useHistory)(),R=(0,d.x)(),N=R.sendReq,T=R.error,S=R.clearError,F=function(){var e=(0,i.Z)(s().mark((function e(n){var t,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N("".concat("https://devfrom.herokuapp.com/api","/users/auth/google"),"POST",JSON.stringify({tokenId:n.tokenId}),{"Content-Type":"application/json"});case 2:t=e.sent,i=t.user,i=(0,a.Z)((0,a.Z)({},i),{},{token:n.tokenId}),x(i),C.push("/");case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),O=function(){var e=(0,i.Z)(s().mark((function e(n){var t,i,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.code,e.next=3,N("".concat("https://devfrom.herokuapp.com/api","/users/auth/github"),"POST",JSON.stringify({code:t}),{"Content-Type":"application/json"});case 3:i=e.sent,r=i.user,r=(0,a.Z)((0,a.Z)({},r),{},{token:n.code}),x(r),C.push("/");case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),U=function(){var e=(0,i.Z)(s().mark((function e(n){var t,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N("".concat("https://devfrom.herokuapp.com/api","/users/auth/facebook"),"POST",JSON.stringify({accessToken:n.accessToken,userId:n.userID}),{"Content-Type":"application/json"});case 2:t=e.sent,i=t.user,i=(0,a.Z)((0,a.Z)({},i),{},{token:n.accessToken}),x(i),C.push("/");case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),E=function(){var e=(0,i.Z)(s().mark((function e(t){var a,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!n){e.next=9;break}return i=(0,_.Y1)(g),e.next=6,N("".concat("https://devfrom.herokuapp.com/api","/users/signup"),"POST",i);case 6:a=e.sent,e.next=12;break;case 9:return e.next=11,N("".concat("https://devfrom.herokuapp.com/api","/users/login"),"POST",JSON.stringify(g),{"Content-Type":"application/json"});case 11:a=e.sent;case 12:x(a.user),C.push("/"),e.next=18;break;case 16:e.prev=16,e.t0=e.catch(1);case 18:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(n){return e.apply(this,arguments)}}();return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(w.Z,{error:T,onClose:S}),(0,m.jsxs)("div",{className:"container container-auth",children:[(0,m.jsx)(y,{}),(0,m.jsxs)("div",{className:"auth__social",children:[(0,m.jsx)(h,{onLogin:F}),(0,m.jsx)(j,{onLogin:O}),(0,m.jsx)(L,{onLogin:U}),(0,m.jsx)(I,{})]}),(0,m.jsx)("form",{className:"form__auth",children:(0,m.jsxs)("div",{className:"form__options",children:[(0,m.jsx)("p",{children:"Or"}),(0,m.jsx)("h2",{children:n?"Create a New Account":"Log in using an Existing Account"}),Z,(0,m.jsx)("button",{onClick:E,className:"btn btn__auth btn__auth--mode",disabled:!p(),children:n?"Create account":"Login"}),(0,m.jsx)(l.rU,{className:"btn btn__auth btn__auth--switch",to:n?"/auth":"/auth/new-user",children:n?"Login":"Create account"})]})})]})]})}},832:function(e,n,t){"use strict";t.d(n,{Zc:function(){return _},oW:function(){return y},B5:function(){return b},PG:function(){return k},pP:function(){return w},NN:function(){return C},L:function(){return j}});var a=t(4942),i=t(9439),r=t(1413),s=t(2791),o=t(3433),l=t(8336),c=t(184),u=function(e){var n=(0,s.useState)([]),t=(0,i.Z)(n,2),a=t[0],r=t[1],u=(0,s.useState)(!1),d=(0,i.Z)(u,2),f=d[0],p=d[1];(0,s.useEffect)((function(){r(e.tags)}),[e.tags,r]);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("h4",{children:e.label}),(0,c.jsxs)("div",{className:"tags__input",children:[(0,c.jsx)("ul",{className:"input__list",children:a&&a.map((function(n,t){return(0,c.jsxs)("li",{className:"input__item",children:[(0,c.jsxs)("span",{children:["#",n]}),(0,c.jsx)("i",{className:"input__remove",children:(0,c.jsx)(l.v,{onClick:function(){return function(n){var t=a[n],i=a.filter((function(e){return e!==t}));r(i),e.onChange("tags",i,!0)}(t)}})})]},t)}))}),(0,c.jsx)("input",{type:"text",placeholder:"Press enter to add tags",onKeyUp:function(n){var t=n.target.value;if("Enter"===n.code&&""!==t){r((function(e){return[].concat((0,o.Z)(e),[t])})),n.target.value="";var i=f;""!==t?(p(!0),i=!0):(p(!1),i=!1),e.onChange("tags",[].concat((0,o.Z)(a),[t]),i)}}})]})]})},d=t(9790),f=(t(3178),function(e){var n=(0,s.useState)(""),t=(0,i.Z)(n,2),a=t[0],r=t[1],o=(0,s.useState)(!1),l=(0,i.Z)(o,2),u=l[0],f=l[1],p=(0,s.useRef)();p.current={value:a,isValid:u},(0,s.useEffect)((function(){r(e.value)}),[e.value]);return(0,c.jsx)(d.ZP,{value:a,onChange:function(n){r(n),""!==p.current.value?f(!0):f(!1),e.onChange("body",n,p.current.isValid)}})}),p=function(e){var n=(0,s.useState)(),t=(0,i.Z)(n,2),a=t[0],r=t[1],o=(0,s.useState)(),l=(0,i.Z)(o,2),u=l[0],d=l[1],f=(0,s.useState)(!1),p=(0,i.Z)(f,2),v=p[0],m=p[1],h=(0,s.useRef)();(0,s.useEffect)((function(){r(e.file)}),[e.file]),(0,s.useEffect)((function(){if(a)if("string"===typeof a)d("".concat(a));else{var e=new FileReader;e.onload=function(){d(e.result)},e.readAsDataURL(a)}}),[a]);return(0,c.jsxs)("div",{className:"form__image",children:[(0,c.jsx)("input",{id:e.id,ref:h,style:{display:"none"},type:"file",accept:".jpg,.png,.jpeg",onChange:function(n){var t,a=v;n.target.files||1===n.target.files.length?(t=n.target.files[0],r(t),m(!0),a=!0):(m(!1),a=!1),e.onInput(e.label.toLowerCase(),t,a)}}),(0,c.jsxs)("div",{className:"image-upload ".concat(e.center&&"center"),children:[(0,c.jsxs)("div",{className:"image-upload__preview",children:[u&&(0,c.jsx)("img",{src:u,alt:"preview"}),!u&&(0,c.jsx)("p",{children:"Please pick an image"})]}),(0,c.jsx)("button",{type:"button",className:"btn btn-upload",onClick:function(){h.current.click()},children:"Choose image"})]}),!v&&(0,c.jsx)("p",{children:e.errorText})]})},v=function(e){var n=e.elementType,t=e.label,a=e.type,i=e.name,r=e.id,s=e.rows,o=e.handleChange,l=e.errorMessage,u=e.isValid,d=e.value,f=e.touched,p="input"===n?(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("input",{className:"form__input",type:a,name:i,id:r,onChange:o,value:d},t)}):(0,c.jsx)("textarea",{label:t,id:r,type:a,name:i,className:"form__textarea",rows:s||3,onChange:o,value:d});return(0,c.jsxs)("div",{className:"form__group",children:[(0,c.jsx)("label",{htmlFor:i,className:"form__label",children:t}),p,!f&&l&&!u&&(0,c.jsx)("span",{className:"input__error",children:l})]})};function m(e,n,t){return{name:e,message:n,validate:t}}function h(e){return m("required","".concat(e," required"),(function(e,n){return 0!==e.length}))}function g(e,n){return m("minLength","".concat(e," should contain atleast ").concat(n," characters"),(function(e,t){return e.length>=n}))}function Z(e,n){return m("minLength","".concat(e," cannot contain more than ").concat(n," characters"),(function(e,t){return e.length<=n}))}var x=function(e,n,t){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"input",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return{renderInput:function(i,r,s,o,l,d){return"Image"===e||"Avatar"===e?(0,c.jsx)(p,{label:e,center:!0,onInput:d,file:r},e):"Body"===e?(0,c.jsx)(f,{value:r,onChange:d},"Body"):"Tags"===e?(0,c.jsx)(u,{label:e,tags:r,onChange:d},"Tags"):(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(v,{name:n,type:t,label:e,elementType:a,isValid:s,value:r,handleChange:i,errorMessage:o},e)})},label:e,value:i,valid:!1,errorMessage:"",touched:!1}},j={name:(0,r.Z)((0,r.Z)({},x("Full Name","name","text")),{},{validationRules:[h("name"),g("name",3),Z("name",25)],key:"1"}),email:(0,r.Z)((0,r.Z)({},x("Email","email","email")),{},{validationRules:[h("email"),g("email",10),Z("email",25)],key:"2"}),password:(0,r.Z)((0,r.Z)({},x("Password","password","password")),{},{validationRules:[h("password"),g("password",6),Z("password",20)],key:"3"}),avatar:(0,r.Z)((0,r.Z)({},x("Avatar","avatar","file")),{},{validationRules:[h("avatar")],key:"1"})},b=function(){for(var e={},n=0,t=Object.entries(j);n<t.length;n++){var a=(0,i.Z)(t[n],2),r=a[0],s=a[1];"name"!==r&&"avatar"!==r&&(e[r]=s)}return e}(),k={title:(0,r.Z)((0,r.Z)({},x("Title","title","text")),{},{validationRules:[h("title")]}),image:(0,r.Z)((0,r.Z)({},x("Image","image","file")),{},{validationRules:[h("image")]}),imageAlt:(0,r.Z)((0,r.Z)({},x("Image Alt","imageAlt","text")),{},{validationRules:[h("Image Alt")]}),body:(0,r.Z)((0,r.Z)({},x("Body","body","text")),{},{validationRules:[h("Body")]}),topic:(0,r.Z)((0,r.Z)({},x("Topic","topic","text")),{},{validationRules:[h("Topic")]}),tags:(0,r.Z)((0,r.Z)({},x("Tags","tags","text")),{},{validationRules:[h("Tags")]}),titleURL:(0,r.Z)((0,r.Z)({},x("titleURL","titleURL","titleURL")),{},{validationRules:[h("titleURL")]})},_={title:(0,r.Z)((0,r.Z)({},x("Title","title","text")),{},{validationRules:[h("title")]}),image:(0,r.Z)((0,r.Z)({},x("Image","image","file")),{},{validationRules:[h("image")]}),imageAlt:(0,r.Z)((0,r.Z)({},x("Image Alt","imageAlt","text")),{},{validationRules:[h("Image Alt")]}),body:(0,r.Z)((0,r.Z)({},x("Body","body","text")),{},{validationRules:[h("Body")]}),topic:(0,r.Z)((0,r.Z)({},x("Topic","topic","text")),{},{validationRules:[h("Topic")]}),tags:(0,r.Z)((0,r.Z)({},x("Tags","tags","text")),{},{validationRules:[h("Tags")]}),titleURL:(0,r.Z)((0,r.Z)({},x("titleURL","titleURL","titleURL")),{},{validationRules:[h("titleURL")]})},y={name:(0,r.Z)((0,r.Z)({},x("Name","name","text")),{},{validationRules:[h("name")]}),avatar:(0,r.Z)((0,r.Z)({},x("Image","image","file")),{},{validationRules:[h("image")]}),bio:(0,r.Z)((0,r.Z)({},x("Bio","bio","text")),{},{validationRules:[h("bio")]}),links:(0,r.Z)((0,r.Z)({},x("Social Links","links","text")),{},{validationRules:[h("links")]}),location:(0,r.Z)((0,r.Z)({},x("Location","location","text")),{},{validationRules:[h("location")]}),work:(0,r.Z)((0,r.Z)({},x("Work","work","text")),{},{validationRules:[h("work")]}),skills:(0,r.Z)((0,r.Z)({},x("Skills","skills","text")),{},{validationRules:[h("skills")]})},w=function(e){for(var n=0,t=Object.entries(e);n<t.length;n++){var s=(0,i.Z)(t[n],2),o=s[0],l=s[1];o in _&&("tags"===o?function(){var n=[];e[o].forEach((function(e){n.push(e.name)})),_=(0,r.Z)((0,r.Z)({},_),{},(0,a.Z)({},o,(0,r.Z)((0,r.Z)({},_[o]),{},{value:n,valid:!0})))}():_=(0,r.Z)((0,r.Z)({},_),{},(0,a.Z)({},o,(0,r.Z)((0,r.Z)({},_[o]),{},{value:l,valid:!0}))))}},C=function(e){for(var n=0,t=Object.entries(e);n<t.length;n++){var s=(0,i.Z)(t[n],2),o=s[0],l=s[1];o in y&&(y=(0,r.Z)((0,r.Z)({},y),{},(0,a.Z)({},o,(0,r.Z)((0,r.Z)({},y[o]),{},{value:l,valid:!0}))))}}},2562:function(){}}]);
//# sourceMappingURL=478.b2fab1c8.chunk.js.map