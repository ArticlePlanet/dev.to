(self.webpackChunkdevto_clone_client=self.webpackChunkdevto_clone_client||[]).push([[47],{3943:function(e,t,a){"use strict";var n=a(4942),i=a(1413),r=a(7762),l=a(9439),s=a(2791);t.Z=function(e){var t=(0,s.useState)(e),a=(0,l.Z)(t,2),o=a[0],u=a[1],c=(0,s.useCallback)((function(e){var t,a=(0,r.Z)(e.validationRules);try{for(a.s();!(t=a.n()).done;){var n=t.value;if(!n.validate(e.value,o))return e.errorMessage=n.message,!1}}catch(i){a.e(i)}finally{a.f()}return!0}),[o]),d=(0,s.useCallback)((function(e){var t=e.target,a=t.name,r=t.value,l=(0,i.Z)((0,i.Z)({},o[a]),{},{value:r}),s=c(l);s&&!l.valid?l=(0,i.Z)((0,i.Z)({},l),{},{valid:!0}):l.touched||s||!l.valid||(l=(0,i.Z)((0,i.Z)({},l),{},{valid:!1})),l=(0,i.Z)((0,i.Z)({},l),{},{touched:!0}),u((0,i.Z)((0,i.Z)({},o),{},(0,n.Z)({},a,l)))}),[o,c]),v=(0,s.useCallback)((function(e,t,a){u((0,i.Z)((0,i.Z)({},o),{},(0,n.Z)({},e,(0,i.Z)((0,i.Z)({},o[e]),{},{value:t,valid:a}))))}),[o]);return{renderFormInputs:function(){return Object.values(o).map((function(e){var t=e.value,a=e.label,n=e.errorMessage,i=e.valid;return(0,e.renderInput)(d,t,i,n,a,v)}))},renderFormValues:function(){var e={};return Object.keys(o).forEach((function(t){e[t]=o[t].value})),e},isFormValid:(0,s.useCallback)((function(e){for(var t=!0,a=Object.values(e||o),n=0;n<a.length;n++)if(!a[n].valid){t=!1;break}return t}),[o]),setForm:u}}},6258:function(e,t,a){"use strict";a.r(t);var n=a(5861),i=a(7757),r=a.n(i),l=a(2791),s=a(6545),o=a(3943),u=a(8241),c=a(542),d=a(832),v=a(2703),f=a(441),m=a(4132),Z=a(184);t.default=function(){var e=(0,l.useContext)(u.V),t=(0,c.k6)(),a=e.currentUser,i=(0,s.x)(),g=i.isLoading,p=i.sendReq,h=i.error,x=i.clearError,j=(0,o.Z)(d.PG),b=j.renderFormInputs,R=j.renderFormValues,k=j.isFormValid,y=R(),_=b(),C=function(){var e=(0,n.Z)(r().mark((function e(n){var i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),(i=(0,v.Y1)(y)).append("author",a.userId),e.prev=3,e.next=6,p("".concat("https://devfrom.herokuapp.com/api","/posts"),"POST",i,{Authorization:"Bearer ".concat(a.token)});case 6:t.push("/"),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(3);case 11:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}();return(0,Z.jsxs)(Z.Fragment,{children:[g&&(0,Z.jsx)(m.Z,{asOverlay:!0}),(0,Z.jsx)(f.Z,{error:h,onClose:x}),!g&&(0,Z.jsx)("div",{className:"container-create-page",children:(0,Z.jsxs)("form",{className:"form form__create",children:[(0,Z.jsx)("h2",{children:"Add a New Post"}),_,(0,Z.jsxs)("button",{onClick:C,className:"btn",disabled:!k(),children:["Submit ",(0,Z.jsx)("span",{children:"\u2192"})]})]})})]})}},832:function(e,t,a){"use strict";a.d(t,{Zc:function(){return k},oW:function(){return y},B5:function(){return b},PG:function(){return R},pP:function(){return _},NN:function(){return C},L:function(){return j}});var n=a(4942),i=a(9439),r=a(1413),l=a(3433),s=a(2791),o=a(8336),u=a(184),c=function(e){var t=(0,s.useState)([]),a=(0,i.Z)(t,2),n=a[0],r=a[1],c=(0,s.useState)(!1),d=(0,i.Z)(c,2),v=d[0],f=d[1];(0,s.useEffect)((function(){r(e.tags)}),[e.tags,r]);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("h4",{children:e.label}),(0,u.jsxs)("div",{className:"tags__input",children:[(0,u.jsx)("ul",{className:"input__list",children:n&&n.map((function(t,a){return(0,u.jsxs)("li",{className:"input__item",children:[(0,u.jsxs)("span",{children:["#",t]}),(0,u.jsx)("i",{className:"input__remove",children:(0,u.jsx)(o.v,{onClick:function(){return function(t){var a=n[t],i=n.filter((function(e){return e!==a}));r(i),e.onChange("tags",i,!0)}(a)}})})]},a)}))}),(0,u.jsx)("input",{type:"text",placeholder:"Press enter to add tags",onKeyUp:function(t){var a=t.target.value;if("Enter"===t.code&&""!==a){r((function(e){return[].concat((0,l.Z)(e),[a])})),t.target.value="";var i=v;""!==a?(f(!0),i=!0):(f(!1),i=!1),e.onChange("tags",[].concat((0,l.Z)(n),[a]),i)}}})]})]})},d=a(9790),v=(a(3178),function(e){var t=(0,s.useState)(""),a=(0,i.Z)(t,2),n=a[0],r=a[1],l=(0,s.useState)(!1),o=(0,i.Z)(l,2),c=o[0],v=o[1],f=(0,s.useRef)();f.current={value:n,isValid:c},(0,s.useEffect)((function(){r(e.value)}),[e.value]);return(0,u.jsx)(d.ZP,{value:n,onChange:function(t){r(t),""!==f.current.value?v(!0):v(!1),e.onChange("body",t,f.current.isValid)}})}),f=function(e){var t=(0,s.useState)(),a=(0,i.Z)(t,2),n=a[0],r=a[1],l=(0,s.useState)(),o=(0,i.Z)(l,2),c=o[0],d=o[1],v=(0,s.useState)(!1),f=(0,i.Z)(v,2),m=f[0],Z=f[1],g=(0,s.useRef)();(0,s.useEffect)((function(){r(e.file)}),[e.file]),(0,s.useEffect)((function(){if(n)if("string"===typeof n)d("".concat(n));else{var e=new FileReader;e.onload=function(){d(e.result)},e.readAsDataURL(n)}}),[n]);return(0,u.jsxs)("div",{className:"form__image",children:[(0,u.jsx)("input",{id:e.id,ref:g,style:{display:"none"},type:"file",accept:".jpg,.png,.jpeg",onChange:function(t){var a,n=m;t.target.files||1===t.target.files.length?(a=t.target.files[0],r(a),Z(!0),n=!0):(Z(!1),n=!1),e.onInput(e.label.toLowerCase(),a,n)}}),(0,u.jsxs)("div",{className:"image-upload ".concat(e.center&&"center"),children:[(0,u.jsxs)("div",{className:"image-upload__preview",children:[c&&(0,u.jsx)("img",{src:c,alt:"preview"}),!c&&(0,u.jsx)("p",{children:"Please pick an image"})]}),(0,u.jsx)("button",{type:"button",className:"btn btn-upload",onClick:function(){g.current.click()},children:"Choose image"})]}),!m&&(0,u.jsx)("p",{children:e.errorText})]})},m=function(e){var t=e.elementType,a=e.label,n=e.type,i=e.name,r=e.id,l=e.rows,s=e.handleChange,o=e.errorMessage,c=e.isValid,d=e.value,v=e.touched,f="input"===t?(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("input",{className:"form__input",type:n,name:i,id:r,onChange:s,value:d},a)}):(0,u.jsx)("textarea",{label:a,id:r,type:n,name:i,className:"form__textarea",rows:l||3,onChange:s,value:d});return(0,u.jsxs)("div",{className:"form__group",children:[(0,u.jsx)("label",{htmlFor:i,className:"form__label",children:a}),f,!v&&o&&!c&&(0,u.jsx)("span",{className:"input__error",children:o})]})};function Z(e,t,a){return{name:e,message:t,validate:a}}function g(e){return Z("required","".concat(e," required"),(function(e,t){return 0!==e.length}))}function p(e,t){return Z("minLength","".concat(e," should contain atleast ").concat(t," characters"),(function(e,a){return e.length>=t}))}function h(e,t){return Z("minLength","".concat(e," cannot contain more than ").concat(t," characters"),(function(e,a){return e.length<=t}))}var x=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"input",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return{renderInput:function(i,r,l,s,o,d){return"Image"===e||"Avatar"===e?(0,u.jsx)(f,{label:e,center:!0,onInput:d,file:r},e):"Body"===e?(0,u.jsx)(v,{value:r,onChange:d},"Body"):"Tags"===e?(0,u.jsx)(c,{label:e,tags:r,onChange:d},"Tags"):(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(m,{name:t,type:a,label:e,elementType:n,isValid:l,value:r,handleChange:i,errorMessage:s},e)})},label:e,value:i,valid:!1,errorMessage:"",touched:!1}},j={name:(0,r.Z)((0,r.Z)({},x("Full Name","name","text")),{},{validationRules:[g("name"),p("name",3),h("name",25)],key:"1"}),email:(0,r.Z)((0,r.Z)({},x("Email","email","email")),{},{validationRules:[g("email"),p("email",10),h("email",25)],key:"2"}),password:(0,r.Z)((0,r.Z)({},x("Password","password","password")),{},{validationRules:[g("password"),p("password",6),h("password",20)],key:"3"}),avatar:(0,r.Z)((0,r.Z)({},x("Avatar","avatar","file")),{},{validationRules:[g("avatar")],key:"1"})},b=function(){for(var e={},t=0,a=Object.entries(j);t<a.length;t++){var n=(0,i.Z)(a[t],2),r=n[0],l=n[1];"name"!==r&&"avatar"!==r&&(e[r]=l)}return e}(),R={title:(0,r.Z)((0,r.Z)({},x("Title","title","text")),{},{validationRules:[g("title")]}),image:(0,r.Z)((0,r.Z)({},x("Image","image","file")),{},{validationRules:[g("image")]}),imageAlt:(0,r.Z)((0,r.Z)({},x("Image Alt","imageAlt","text")),{},{validationRules:[g("Image Alt")]}),body:(0,r.Z)((0,r.Z)({},x("Body","body","text")),{},{validationRules:[g("Body")]}),topic:(0,r.Z)((0,r.Z)({},x("Topic","topic","text")),{},{validationRules:[g("Topic")]}),tags:(0,r.Z)((0,r.Z)({},x("Tags","tags","text")),{},{validationRules:[g("Tags")]}),titleURL:(0,r.Z)((0,r.Z)({},x("titleURL","titleURL","titleURL")),{},{validationRules:[g("titleURL")]})},k={title:(0,r.Z)((0,r.Z)({},x("Title","title","text")),{},{validationRules:[g("title")]}),image:(0,r.Z)((0,r.Z)({},x("Image","image","file")),{},{validationRules:[g("image")]}),imageAlt:(0,r.Z)((0,r.Z)({},x("Image Alt","imageAlt","text")),{},{validationRules:[g("Image Alt")]}),body:(0,r.Z)((0,r.Z)({},x("Body","body","text")),{},{validationRules:[g("Body")]}),topic:(0,r.Z)((0,r.Z)({},x("Topic","topic","text")),{},{validationRules:[g("Topic")]}),tags:(0,r.Z)((0,r.Z)({},x("Tags","tags","text")),{},{validationRules:[g("Tags")]}),titleURL:(0,r.Z)((0,r.Z)({},x("titleURL","titleURL","titleURL")),{},{validationRules:[g("titleURL")]})},y={name:(0,r.Z)((0,r.Z)({},x("Name","name","text")),{},{validationRules:[g("name")]}),avatar:(0,r.Z)((0,r.Z)({},x("Image","image","file")),{},{validationRules:[g("image")]}),bio:(0,r.Z)((0,r.Z)({},x("Bio","bio","text")),{},{validationRules:[g("bio")]}),links:(0,r.Z)((0,r.Z)({},x("Social Links","links","text")),{},{validationRules:[g("links")]}),location:(0,r.Z)((0,r.Z)({},x("Location","location","text")),{},{validationRules:[g("location")]}),work:(0,r.Z)((0,r.Z)({},x("Work","work","text")),{},{validationRules:[g("work")]}),skills:(0,r.Z)((0,r.Z)({},x("Skills","skills","text")),{},{validationRules:[g("skills")]})},_=function(e){for(var t=0,a=Object.entries(e);t<a.length;t++){var l=(0,i.Z)(a[t],2),s=l[0],o=l[1];s in k&&("tags"===s?function(){var t=[];e[s].forEach((function(e){t.push(e.name)})),k=(0,r.Z)((0,r.Z)({},k),{},(0,n.Z)({},s,(0,r.Z)((0,r.Z)({},k[s]),{},{value:t,valid:!0})))}():k=(0,r.Z)((0,r.Z)({},k),{},(0,n.Z)({},s,(0,r.Z)((0,r.Z)({},k[s]),{},{value:o,valid:!0}))))}},C=function(e){for(var t=0,a=Object.entries(e);t<a.length;t++){var l=(0,i.Z)(a[t],2),s=l[0],o=l[1];s in y&&(y=(0,r.Z)((0,r.Z)({},y),{},(0,n.Z)({},s,(0,r.Z)((0,r.Z)({},y[s]),{},{value:o,valid:!0}))))}}},2562:function(){}}]);
//# sourceMappingURL=47.08a8f9d9.chunk.js.map