{"version":3,"file":"static/js/216.065dc9e8.chunk.js","mappings":"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","sources":["hooks/useForm.js","pages/EditPost/EditPost.js","components/FormElements/TagsInput/TagsInput.js","components/FormElements/BodyInput/BodyInput.js","components/FormElements/ImageUpload/ImageUpload.js","components/FormElements/Input/Input.js","utils/inputValidationRules.js","utils/formConfig.js"],"sourcesContent":["import { useState, useCallback } from 'react';\n\n//\"signupForm\" => \"formObj\" (name, email, password) => \"form\"\nconst useForm = (formObj) => {\n  const [form, setForm] = useState(formObj);\n\n  const renderFormInputs = () => {\n    //renders an [] of <Input> for all input fields\n    return Object.values(form).map((inputObj) => {\n      const { value, label, errorMessage, valid, renderInput } = inputObj;\n      return renderInput(\n        onInputChange,\n        value,\n        valid,\n        errorMessage,\n        label,\n        onCustomInputChange\n      );\n    });\n  };\n\n  const renderFormValues = () => {\n    let values = {};\n    Object.keys(form).forEach((inputObj) => {\n      values[inputObj] = form[inputObj].value;\n    });\n    return values;\n  };\n\n  const isInputFieldValid = useCallback(\n    (inputField) => {\n      for (const rule of inputField.validationRules) {\n        if (!rule.validate(inputField.value, form)) {\n          inputField.errorMessage = rule.message;\n          return false;\n        }\n      }\n      return true;\n    },\n    [form]\n  );\n\n  const onInputChange = useCallback(\n    (event) => {\n      const { name, value } = event.target;\n      let inputObj = { ...form[name], value };\n      const isValidInput = isInputFieldValid(inputObj);\n      if (isValidInput && !inputObj.valid) {\n        inputObj = { ...inputObj, valid: true };\n      } else if (!inputObj.touched && !isValidInput && inputObj.valid) {\n        inputObj = { ...inputObj, valid: false };\n      }\n      inputObj = { ...inputObj, touched: true };\n      setForm({ ...form, [name]: inputObj });\n    },\n    [form, isInputFieldValid]\n  );\n\n  const onCustomInputChange = useCallback(\n    (type, value, InputIsValid) => {\n      setForm({\n        ...form,\n        [type]: { ...form[type], value, valid: InputIsValid },\n      });\n    },\n    [form]\n  );\n\n  const isFormValid = useCallback(\n    (customForm) => {\n      let isValid = true;\n      const arr = Object.values(customForm || form);\n      for (let i = 0; i < arr.length; i++) {\n        if (!arr[i].valid) {\n          isValid = false;\n          break;\n        }\n      }\n      return isValid;\n    },\n    [form]\n  );\n\n  return {\n    renderFormInputs,\n    renderFormValues,\n    isFormValid,\n    setForm,\n  };\n};\n\nexport default useForm;\n","import React, { useState, useEffect, useContext } from 'react';\nimport { useParams, useHistory } from 'react-router-dom';\nimport { useHttpClient } from '../../hooks/useHttpClient';\nimport { AuthContext } from '../../context/auth';\nimport useForm from '../../hooks/useForm';\nimport { editPostForm, prefillEditPostForm } from '../../utils/formConfig';\nimport { appendData } from '../../utils';\nimport LoadingSpinner from '../../components/LoadingSpinner/LoadingSpinner';\nimport ErrorModal from '../../components/Modal/ErrorModal';\n\nconst EditPost = () => {\n  const { sendReq, isLoading, error, clearError } = useHttpClient();\n  const { currentUser } = useContext(AuthContext);\n  const [loadedPost, setLoadedPost] = useState({});\n  const { postId, titleURL } = useParams();\n  const history = useHistory();\n  const { renderFormInputs, renderFormValues, setForm, isFormValid } =\n    useForm(editPostForm);\n  let formValues = renderFormValues();\n  let formInputs = renderFormInputs();\n\n  useEffect(() => {\n    const fetchPost = async () => {\n      try {\n        const responseData = await sendReq(\n          `${process.env.REACT_APP_BASE_URL}/posts/${titleURL}/${postId}`\n        );\n        prefillEditPostForm(responseData.post);\n        if (currentUser.userId !== responseData.post.author.id) {\n          history.push('/');\n        }\n        setLoadedPost(responseData.post);\n        await setForm(editPostForm);\n      } catch (err) {}\n    };\n    fetchPost();\n  }, [sendReq, postId, titleURL, setForm, currentUser, history]);\n\n  const postSubmitHandle = async (evt) => {\n    evt.preventDefault();\n    const formData = appendData(formValues);\n    formData.append('author', currentUser.userId);\n    try {\n      await sendReq(\n        `${process.env.REACT_APP_BASE_URL}/posts/${titleURL}/${postId}`,\n        'PATCH',\n        formData,\n        {\n          Authorization: `Bearer ${currentUser.token}`,\n        }\n      );\n      history.push(`/posts/${titleURL}/${postId}`);\n    } catch (err) {}\n  };\n\n  return (\n    <>\n      {isLoading && <LoadingSpinner asOverlay={true} />}\n      <ErrorModal error={error} onClose={clearError} />\n      {!isLoading && (\n        <div className='container-edit-page'>\n          <form className='form form__edit'>\n            <h2>Edit Post</h2>\n            {!isLoading && loadedPost.image && loadedPost.body && formInputs}\n            <button\n              type='button'\n              onClick={postSubmitHandle}\n              className='btn btn-submit'\n              disabled={!isFormValid()}\n            >\n              Update Post\n            </button>\n          </form>\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default EditPost;\n","import React, { useEffect, useState } from 'react';\nimport { GrFormClose } from '@react-icons/all-files/gr/GrFormClose';\nimport './TagsInput.css';\n\nexport const TagsInput = (props) => {\n  const [tags, setTags] = useState([]);\n  const [isValid, setIsValid] = useState(false);\n\n  const addTag = (evt) => {\n    const tag = evt.target.value;\n    if (evt.code === 'Enter' && tag !== '') {\n      setTags((tags) => [...tags, tag]);\n      evt.target.value = '';\n      let isInputValid = isValid;\n      if (tag !== '') {\n        setIsValid(true);\n        isInputValid = true;\n      } else {\n        setIsValid(false);\n        isInputValid = false;\n      }\n      props.onChange('tags', [...tags, tag], isInputValid);\n    }\n  };\n\n  useEffect(() => {\n    setTags(props.tags);\n  }, [props.tags, setTags]);\n\n  //just send the tags array and run onChange in both add and remove?\n\n  const removeTag = (indexToRemove) => {\n    const removedTag = tags[indexToRemove];\n    const updatedTags = tags.filter((tag) => tag !== removedTag);\n    setTags(updatedTags);\n    props.onChange('tags', updatedTags, true);\n  };\n\n  return (\n    <>\n      <h4>{props.label}</h4>\n      <div className='tags__input'>\n        <ul className='input__list'>\n          {tags &&\n            tags.map((tag, index) => (\n              <li className='input__item' key={index}>\n                <span>#{tag}</span>\n                <i className='input__remove'>\n                  <GrFormClose onClick={() => removeTag(index)} />\n                </i>\n              </li>\n            ))}\n        </ul>\n        <input\n          type='text'\n          placeholder='Press enter to add tags'\n          onKeyUp={addTag}\n        />\n      </div>\n    </>\n  );\n};\n\nexport default TagsInput;\n","import React, { useEffect, useRef, useState } from 'react';\nimport SimpleMDE from 'react-simplemde-editor';\nimport 'easymde/dist/easymde.min.css';\n\nexport const BodyInput = (props) => {\n  const [value, setValue] = useState('');\n  const [isValid, setIsValid] = useState(false);\n\n  const valueRef = useRef();\n  valueRef.current = { value, isValid };\n\n  useEffect(() => {\n    setValue(props.value);\n  }, [props.value]);\n\n  const onChange = (value) => {\n    setValue(value);\n    if (valueRef.current.value !== '') {\n      setIsValid(true);\n    } else {\n      setIsValid(false);\n    }\n    props.onChange('body', value, valueRef.current.isValid);\n  };\n\n  return <SimpleMDE value={value} onChange={onChange} />;\n};\n","import React, { useRef, useState, useEffect } from 'react';\nimport './ImageUpload.css';\n\nconst ImageUpload = (props) => {\n  const [file, setFile] = useState();\n  const [previewURL, setPreviewURL] = useState();\n  const [isValid, setIsValid] = useState(false);\n  const filePickerRef = useRef();\n\n  useEffect(() => {\n    setFile(props.file);\n  }, [props.file]);\n\n  useEffect(() => {\n    if (!file) {\n      return;\n    }\n    if (typeof file === 'string') {\n      setPreviewURL(`${file}`);\n    } else {\n      const fileReader = new FileReader();\n      fileReader.onload = () => {\n        setPreviewURL(fileReader.result);\n      };\n      fileReader.readAsDataURL(file);\n    }\n  }, [file]);\n  const pickedHandler = (e) => {\n    let pickedFile;\n    let fileIsValid = isValid;\n    if (e.target.files || e.target.files.length === 1) {\n      pickedFile = e.target.files[0];\n      setFile(pickedFile);\n      setIsValid(true);\n      fileIsValid = true;\n    } else {\n      setIsValid(false);\n      fileIsValid = false;\n    }\n    //file already being validated here\n    props.onInput(props.label.toLowerCase(), pickedFile, fileIsValid);\n  };\n  const pickImageHandler = () => {\n    filePickerRef.current.click();\n  };\n  return (\n    <div className='form__image'>\n      <input\n        id={props.id}\n        ref={filePickerRef}\n        style={{ display: 'none' }}\n        type='file'\n        accept='.jpg,.png,.jpeg'\n        onChange={pickedHandler}\n      />\n      <div className={`image-upload ${props.center && 'center'}`}>\n        <div className='image-upload__preview'>\n          {previewURL && <img src={previewURL} alt='preview' />}\n          {!previewURL && <p>Please pick an image</p>}\n        </div>\n        <button\n          type='button'\n          className='btn btn-upload'\n          onClick={pickImageHandler}\n        >\n          Choose image\n        </button>\n      </div>\n      {!isValid && <p>{props.errorText}</p>}\n    </div>\n  );\n};\n\nexport default ImageUpload;\n","import React from 'react';\nimport './Input.css';\n\nconst Input = (props) => {\n  const {\n    elementType,\n    label,\n    type,\n    name,\n    id,\n    rows,\n    handleChange,\n    // handleBlur,\n    errorMessage,\n    isValid,\n    value,\n    touched,\n  } = props;\n\n  const element =\n    elementType === 'input' ? (\n      <>\n        <input\n          className='form__input'\n          type={type}\n          name={name}\n          id={id}\n          key={label}\n          onChange={handleChange}\n          // onBlur={handleBlur}\n          value={value}\n        />\n      </>\n    ) : (\n      <textarea\n        label={label}\n        id={id}\n        type={type}\n        name={name}\n        className='form__textarea'\n        rows={rows || 3}\n        onChange={handleChange}\n        // onBlur={handleBlur}\n        value={value}\n      />\n    );\n  return (\n    <div className='form__group'>\n      <label htmlFor={name} className='form__label'>\n        {label}\n      </label>\n      {element}\n      {!touched && errorMessage && !isValid && (\n        <span className='input__error'>{errorMessage}</span>\n      )}\n    </div>\n  );\n};\n\nexport default Input;\n","/**\n * creates and returns a validation rule object that\n * is used by useForm hook to validate the form inputs\n *\n * @param {string} ruleName - name of the validation rule\n * @param {string} errorMessage - message to display\n * @param {function} validateFunc - validation function\n */\nfunction createValidationRule(ruleName, errorMessage, validateFunc) {\n  return {\n    name: ruleName,\n    message: errorMessage,\n    validate: validateFunc,\n  };\n}\n\nexport function requiredRule(inputName) {\n  return createValidationRule(\n    'required',\n    `${inputName} required`,\n    (inputValue, formObj) => inputValue.length !== 0\n  );\n}\n\nexport function minLengthRule(inputName, minCharacters) {\n  return createValidationRule(\n    'minLength',\n    `${inputName} should contain atleast ${minCharacters} characters`,\n    (inputValue, formObj) => inputValue.length >= minCharacters\n  );\n}\n\nexport function maxLengthRule(inputName, maxCharacters) {\n  return createValidationRule(\n    'minLength',\n    `${inputName} cannot contain more than ${maxCharacters} characters`,\n    (inputValue, formObj) => inputValue.length <= maxCharacters\n  );\n}\n\nexport function passwordMatchRule() {\n  return createValidationRule(\n    'passwordMatch',\n    `passwords do not match`,\n    (inputValue, formObj) => inputValue === formObj.password.value\n  );\n}\n","import React from 'react';\nimport TagsInput from '../components/FormElements/TagsInput/TagsInput';\nimport { BodyInput } from '../components/FormElements/BodyInput/BodyInput';\nimport ImageUpload from '../components/FormElements/ImageUpload/ImageUpload';\nimport Input from '../components/FormElements/Input/Input';\nimport {\n  maxLengthRule,\n  minLengthRule,\n  requiredRule,\n} from './inputValidationRules';\n\nconst createFormFieldConfig = (\n  label,\n  name,\n  type,\n  elementType = 'input',\n  defaultValue = ''\n) => {\n  //return an obj representing a single input\n  return {\n    //render a given input\n    renderInput: (\n      handleChange,\n      value,\n      isValid,\n      error,\n      key,\n      onCustomInputChange\n    ) => {\n      if (label === 'Image' || label === 'Avatar') {\n        return (\n          <ImageUpload\n            label={label}\n            key={label}\n            center\n            onInput={onCustomInputChange}\n            file={value}\n          />\n        );\n      }\n      if (label === 'Body') {\n        return (\n          <BodyInput key='Body' value={value} onChange={onCustomInputChange} />\n        );\n      }\n      if (label === 'Tags') {\n        return (\n          <TagsInput\n            key='Tags'\n            label={label}\n            tags={value}\n            onChange={onCustomInputChange}\n          />\n        );\n      }\n\n      return (\n        <>\n          <Input\n            key={label}\n            name={name}\n            type={type}\n            label={label}\n            elementType={elementType}\n            isValid={isValid}\n            value={value}\n            handleChange={handleChange}\n            // handleBlur={handleBlur}\n            errorMessage={error}\n          />\n        </>\n      );\n    },\n    label,\n    value: defaultValue,\n    valid: false,\n    errorMessage: '',\n    touched: false,\n  };\n};\n\n//object representation of signup form\n//the hook will use this obj to render the form\n//\"createFormFieldConfig\" takes in label, name, type\nexport const signupForm = {\n  name: {\n    ...createFormFieldConfig('Full Name', 'name', 'text'),\n    validationRules: [\n      requiredRule('name'),\n      minLengthRule('name', 3),\n      maxLengthRule('name', 25),\n    ],\n    key: '1',\n  },\n  email: {\n    ...createFormFieldConfig('Email', 'email', 'email'),\n    validationRules: [\n      requiredRule('email'),\n      minLengthRule('email', 10),\n      maxLengthRule('email', 25),\n    ],\n    key: '2',\n  },\n  password: {\n    ...createFormFieldConfig('Password', 'password', 'password'),\n    validationRules: [\n      requiredRule('password'),\n      minLengthRule('password', 6),\n      maxLengthRule('password', 20),\n    ],\n    key: '3',\n  },\n  avatar: {\n    ...createFormFieldConfig('Avatar', 'avatar', 'file'),\n    validationRules: [requiredRule('avatar')],\n    key: '1',\n  },\n};\n\n//create login form out of signup form\nconst createLoginForm = () => {\n  const form = {};\n  for (let [key, value] of Object.entries(signupForm)) {\n    if (key !== 'name' && key !== 'avatar') form[key] = value;\n  }\n  return form;\n};\n\n//object representation of login form\nexport const loginForm = createLoginForm();\n\nexport const newPostForm = {\n  title: {\n    ...createFormFieldConfig('Title', 'title', 'text'),\n    validationRules: [requiredRule('title')],\n  },\n  image: {\n    ...createFormFieldConfig('Image', 'image', 'file'),\n    validationRules: [requiredRule('image')],\n  },\n  imageAlt: {\n    ...createFormFieldConfig('Image Alt', 'imageAlt', 'text'),\n    validationRules: [requiredRule('Image Alt')],\n  },\n  // imageCredit: {\n  //   ...createFormFieldConfig(\"Image Credit\", \"imageCredit\", \"text\"),\n  //   validationRules: [requiredRule(\"Image Credit\")],\n  // },\n\n  body: {\n    ...createFormFieldConfig('Body', 'body', 'text'),\n    validationRules: [requiredRule('Body')],\n  },\n  topic: {\n    ...createFormFieldConfig('Topic', 'topic', 'text'),\n    validationRules: [requiredRule('Topic')],\n  },\n  tags: {\n    ...createFormFieldConfig('Tags', 'tags', 'text'),\n    validationRules: [requiredRule('Tags')],\n  },\n  titleURL: {\n    ...createFormFieldConfig('titleURL', 'titleURL', 'titleURL'),\n    validationRules: [requiredRule('titleURL')],\n  },\n};\n\nexport let editPostForm = {\n  title: {\n    ...createFormFieldConfig('Title', 'title', 'text'),\n    validationRules: [requiredRule('title')],\n  },\n  image: {\n    ...createFormFieldConfig('Image', 'image', 'file'),\n    validationRules: [requiredRule('image')],\n  },\n  imageAlt: {\n    ...createFormFieldConfig('Image Alt', 'imageAlt', 'text'),\n    validationRules: [requiredRule('Image Alt')],\n  },\n  // imageCredit: {\n  //   ...createFormFieldConfig(\"Image Credit\", \"imageCredit\", \"text\"),\n  //   validationRules: [requiredRule(\"Image Credit\")],\n  // },\n  body: {\n    ...createFormFieldConfig('Body', 'body', 'text'),\n    validationRules: [requiredRule('Body')],\n  },\n  topic: {\n    ...createFormFieldConfig('Topic', 'topic', 'text'),\n    validationRules: [requiredRule('Topic')],\n  },\n  tags: {\n    ...createFormFieldConfig('Tags', 'tags', 'text'),\n    validationRules: [requiredRule('Tags')],\n  },\n  titleURL: {\n    ...createFormFieldConfig('titleURL', 'titleURL', 'titleURL'),\n    validationRules: [requiredRule('titleURL')],\n  },\n};\n\nexport let editProfileForm = {\n  name: {\n    ...createFormFieldConfig('Name', 'name', 'text'),\n    validationRules: [requiredRule('name')],\n  },\n  avatar: {\n    ...createFormFieldConfig('Image', 'image', 'file'),\n    validationRules: [requiredRule('image')],\n  },\n  bio: {\n    ...createFormFieldConfig('Bio', 'bio', 'text'),\n    validationRules: [requiredRule('bio')],\n  },\n  links: {\n    ...createFormFieldConfig('Social Links', 'links', 'text'),\n    validationRules: [requiredRule('links')],\n  },\n  location: {\n    ...createFormFieldConfig('Location', 'location', 'text'),\n    validationRules: [requiredRule('location')],\n  },\n  work: {\n    ...createFormFieldConfig('Work', 'work', 'text'),\n    validationRules: [requiredRule('work')],\n  },\n  skills: {\n    ...createFormFieldConfig('Skills', 'skills', 'text'),\n    validationRules: [requiredRule('skills')],\n  },\n};\n\nexport const prefillEditPostForm = (data) => {\n  for (let [key, value] of Object.entries(data)) {\n    if (key in editPostForm) {\n      if (key === 'tags') {\n        let tags = [];\n        data[key].forEach((tag) => {\n          tags.push(tag.name);\n        });\n        editPostForm = {\n          ...editPostForm,\n          [key]: { ...editPostForm[key], value: tags, valid: true },\n        };\n      } else {\n        editPostForm = {\n          ...editPostForm,\n          [key]: { ...editPostForm[key], value, valid: true },\n        };\n      }\n    }\n  }\n};\n\nexport const prefillEditProfileForm = (data) => {\n  for (let [key, value] of Object.entries(data)) {\n    if (key in editProfileForm) {\n      editProfileForm = {\n        ...editProfileForm,\n        [key]: { ...editProfileForm[key], value, valid: true },\n      };\n    }\n  }\n};\n"],"names":["formObj","useState","form","setForm","isInputFieldValid","useCallback","inputField","validationRules","rule","validate","value","errorMessage","message","onInputChange","event","target","name","inputObj","isValidInput","valid","touched","onCustomInputChange","type","InputIsValid","renderFormInputs","Object","values","map","label","renderInput","renderFormValues","keys","forEach","isFormValid","customForm","isValid","arr","i","length","useHttpClient","sendReq","isLoading","error","clearError","currentUser","useContext","AuthContext","loadedPost","setLoadedPost","useParams","postId","titleURL","history","useHistory","useForm","editPostForm","formValues","formInputs","useEffect","fetchPost","process","responseData","prefillEditPostForm","post","userId","author","id","push","postSubmitHandle","evt","preventDefault","formData","appendData","append","Authorization","token","asOverlay","onClose","className","image","body","onClick","disabled","props","tags","setTags","setIsValid","tag","index","GrFormClose","indexToRemove","removedTag","updatedTags","filter","onChange","removeTag","placeholder","onKeyUp","code","isInputValid","BodyInput","setValue","valueRef","useRef","current","file","setFile","previewURL","setPreviewURL","filePickerRef","fileReader","FileReader","onload","result","readAsDataURL","ref","style","display","accept","e","pickedFile","fileIsValid","files","onInput","toLowerCase","center","src","alt","click","errorText","elementType","rows","handleChange","element","htmlFor","createValidationRule","ruleName","validateFunc","requiredRule","inputName","inputValue","minLengthRule","minCharacters","maxLengthRule","maxCharacters","createFormFieldConfig","defaultValue","key","signupForm","email","password","avatar","loginForm","entries","createLoginForm","newPostForm","title","imageAlt","topic","editProfileForm","bio","links","location","work","skills","data","prefillEditProfileForm"],"sourceRoot":""}