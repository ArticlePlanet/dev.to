(self.webpackChunkdevto_clone_client=self.webpackChunkdevto_clone_client||[]).push([[436],{3943:function(e,t,a){"use strict";var n=a(4942),r=a(1413),i=a(7762),l=a(9439),s=a(2791);t.Z=function(e){var t=(0,s.useState)(e),a=(0,l.Z)(t,2),o=a[0],u=a[1],c=(0,s.useCallback)((function(e){var t,a=(0,i.Z)(e.validationRules);try{for(a.s();!(t=a.n()).done;){var n=t.value;if(!n.validate(e.value,o))return e.errorMessage=n.message,!1}}catch(r){a.e(r)}finally{a.f()}return!0}),[o]),d=(0,s.useCallback)((function(e){var t=e.target,a=t.name,i=t.value,l=(0,r.Z)((0,r.Z)({},o[a]),{},{value:i}),s=c(l);s&&!l.valid?l=(0,r.Z)((0,r.Z)({},l),{},{valid:!0}):l.touched||s||!l.valid||(l=(0,r.Z)((0,r.Z)({},l),{},{valid:!1})),l=(0,r.Z)((0,r.Z)({},l),{},{touched:!0}),u((0,r.Z)((0,r.Z)({},o),{},(0,n.Z)({},a,l)))}),[o,c]),v=(0,s.useCallback)((function(e,t,a){u((0,r.Z)((0,r.Z)({},o),{},(0,n.Z)({},e,(0,r.Z)((0,r.Z)({},o[e]),{},{value:t,valid:a}))))}),[o]);return{renderFormInputs:function(){return Object.values(o).map((function(e){var t=e.value,a=e.label,n=e.errorMessage,r=e.valid;return(0,e.renderInput)(d,t,r,n,a,v)}))},renderFormValues:function(){var e={};return Object.keys(o).forEach((function(t){e[t]=o[t].value})),e},isFormValid:(0,s.useCallback)((function(e){for(var t=!0,a=Object.values(e||o),n=0;n<a.length;n++)if(!a[n].valid){t=!1;break}return t}),[o]),setForm:u}}},2686:function(e,t,a){"use strict";a.r(t);var n=a(1413),r=a(5861),i=a(9439),l=a(7757),s=a.n(l),o=a(2791),u=a(9271),c=a(6545),d=a(8241),v=a(3943),f=a(441),m=a(4132),Z=a(832),p=a(2703),g=a(184);t.default=function(){var e=(0,o.useState)({}),t=(0,i.Z)(e,2),a=t[0],l=t[1],h=(0,v.Z)(Z.oW),x=h.renderFormInputs,b=h.renderFormValues,j=h.setForm,R=(0,u.useHistory)(),k=(0,c.x)(),y=k.sendReq,_=k.isLoading,C=k.error,w=k.clearError,N=(0,u.useParams)().userId,L=(0,o.useContext)(d.V),T=L.currentUser,I=b(),U=x();(0,o.useEffect)((function(){var e=function(){var e=(0,r.Z)(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("".concat("https://devfrom.herokuapp.com/api","/users/").concat(N));case 3:t=e.sent,(0,Z.NN)(t.user),l(t.user),j(Z.oW),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();e()}),[y,N,j,T,R]);var F=function(){var e=(0,r.Z)(s().mark((function e(t){var a,r,i,l,o,u,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=(0,p.Y1)(I),e.prev=2,e.next=5,y("".concat("https://devfrom.herokuapp.com/api","/users/").concat(N),"PATCH",a,{Authorization:"Bearer ".concat(T.token)});case 5:r=e.sent,i=r.user,l=i.name,o=i.bio,u=i.email,c=i.profilePic,(0,L.setUser)((0,n.Z)((0,n.Z)({},T),{},{name:l,bio:o,email:u,profilePic:c})),R.push("/users/".concat(N)),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(2);case 14:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}();return(0,g.jsxs)(g.Fragment,{children:[_&&(0,g.jsx)(m.Z,{asOverlay:!0}),(0,g.jsx)(f.Z,{error:C,onClose:w}),!_&&(0,g.jsx)("div",{className:"container-edit-page",children:(0,g.jsxs)("form",{className:"form form__edit",onSubmit:F,children:[(0,g.jsx)("h2",{children:"Edit Profile"}),!_&&a.avatar&&U,(0,g.jsx)("button",{onClick:F,className:"btn btn-submit",children:"Update Profile"})]})})]})}},832:function(e,t,a){"use strict";a.d(t,{Zc:function(){return k},oW:function(){return y},B5:function(){return j},PG:function(){return R},pP:function(){return _},NN:function(){return C},L:function(){return b}});var n=a(4942),r=a(9439),i=a(1413),l=a(2791),s=a(3433),o=a(8336),u=a(184),c=function(e){var t=(0,l.useState)([]),a=(0,r.Z)(t,2),n=a[0],i=a[1],c=(0,l.useState)(!1),d=(0,r.Z)(c,2),v=d[0],f=d[1];(0,l.useEffect)((function(){i(e.tags)}),[e.tags,i]);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("h4",{children:e.label}),(0,u.jsxs)("div",{className:"tags__input",children:[(0,u.jsx)("ul",{className:"input__list",children:n&&n.map((function(t,a){return(0,u.jsxs)("li",{className:"input__item",children:[(0,u.jsxs)("span",{children:["#",t]}),(0,u.jsx)("i",{className:"input__remove",children:(0,u.jsx)(o.v,{onClick:function(){return function(t){var a=n[t],r=n.filter((function(e){return e!==a}));i(r),e.onChange("tags",r,!0)}(a)}})})]},a)}))}),(0,u.jsx)("input",{type:"text",placeholder:"Press enter to add tags",onKeyUp:function(t){var a=t.target.value;if("Enter"===t.code&&""!==a){i((function(e){return[].concat((0,s.Z)(e),[a])})),t.target.value="";var r=v;""!==a?(f(!0),r=!0):(f(!1),r=!1),e.onChange("tags",[].concat((0,s.Z)(n),[a]),r)}}})]})]})},d=a(9790),v=(a(3178),function(e){var t=(0,l.useState)(""),a=(0,r.Z)(t,2),n=a[0],i=a[1],s=(0,l.useState)(!1),o=(0,r.Z)(s,2),c=o[0],v=o[1],f=(0,l.useRef)();f.current={value:n,isValid:c},(0,l.useEffect)((function(){i(e.value)}),[e.value]);return(0,u.jsx)(d.ZP,{value:n,onChange:function(t){i(t),""!==f.current.value?v(!0):v(!1),e.onChange("body",t,f.current.isValid)}})}),f=function(e){var t=(0,l.useState)(),a=(0,r.Z)(t,2),n=a[0],i=a[1],s=(0,l.useState)(),o=(0,r.Z)(s,2),c=o[0],d=o[1],v=(0,l.useState)(!1),f=(0,r.Z)(v,2),m=f[0],Z=f[1],p=(0,l.useRef)();(0,l.useEffect)((function(){i(e.file)}),[e.file]),(0,l.useEffect)((function(){if(n)if("string"===typeof n)d("".concat(n));else{var e=new FileReader;e.onload=function(){d(e.result)},e.readAsDataURL(n)}}),[n]);return(0,u.jsxs)("div",{className:"form__image",children:[(0,u.jsx)("input",{id:e.id,ref:p,style:{display:"none"},type:"file",accept:".jpg,.png,.jpeg",onChange:function(t){var a,n=m;t.target.files||1===t.target.files.length?(a=t.target.files[0],i(a),Z(!0),n=!0):(Z(!1),n=!1),e.onInput(e.label.toLowerCase(),a,n)}}),(0,u.jsxs)("div",{className:"image-upload ".concat(e.center&&"center"),children:[(0,u.jsxs)("div",{className:"image-upload__preview",children:[c&&(0,u.jsx)("img",{src:c,alt:"preview"}),!c&&(0,u.jsx)("p",{children:"Please pick an image"})]}),(0,u.jsx)("button",{type:"button",className:"btn btn-upload",onClick:function(){p.current.click()},children:"Choose image"})]}),!m&&(0,u.jsx)("p",{children:e.errorText})]})},m=function(e){var t=e.elementType,a=e.label,n=e.type,r=e.name,i=e.id,l=e.rows,s=e.handleChange,o=e.errorMessage,c=e.isValid,d=e.value,v=e.touched,f="input"===t?(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("input",{className:"form__input",type:n,name:r,id:i,onChange:s,value:d},a)}):(0,u.jsx)("textarea",{label:a,id:i,type:n,name:r,className:"form__textarea",rows:l||3,onChange:s,value:d});return(0,u.jsxs)("div",{className:"form__group",children:[(0,u.jsx)("label",{htmlFor:r,className:"form__label",children:a}),f,!v&&o&&!c&&(0,u.jsx)("span",{className:"input__error",children:o})]})};function Z(e,t,a){return{name:e,message:t,validate:a}}function p(e){return Z("required","".concat(e," required"),(function(e,t){return 0!==e.length}))}function g(e,t){return Z("minLength","".concat(e," should contain atleast ").concat(t," characters"),(function(e,a){return e.length>=t}))}function h(e,t){return Z("minLength","".concat(e," cannot contain more than ").concat(t," characters"),(function(e,a){return e.length<=t}))}var x=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"input",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return{renderInput:function(r,i,l,s,o,d){return"Image"===e||"Avatar"===e?(0,u.jsx)(f,{label:e,center:!0,onInput:d,file:i},e):"Body"===e?(0,u.jsx)(v,{value:i,onChange:d},"Body"):"Tags"===e?(0,u.jsx)(c,{label:e,tags:i,onChange:d},"Tags"):(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(m,{name:t,type:a,label:e,elementType:n,isValid:l,value:i,handleChange:r,errorMessage:s},e)})},label:e,value:r,valid:!1,errorMessage:"",touched:!1}},b={name:(0,i.Z)((0,i.Z)({},x("Full Name","name","text")),{},{validationRules:[p("name"),g("name",3),h("name",25)],key:"1"}),email:(0,i.Z)((0,i.Z)({},x("Email","email","email")),{},{validationRules:[p("email"),g("email",10),h("email",25)],key:"2"}),password:(0,i.Z)((0,i.Z)({},x("Password","password","password")),{},{validationRules:[p("password"),g("password",6),h("password",20)],key:"3"}),avatar:(0,i.Z)((0,i.Z)({},x("Avatar","avatar","file")),{},{validationRules:[p("avatar")],key:"1"})},j=function(){for(var e={},t=0,a=Object.entries(b);t<a.length;t++){var n=(0,r.Z)(a[t],2),i=n[0],l=n[1];"name"!==i&&"avatar"!==i&&(e[i]=l)}return e}(),R={title:(0,i.Z)((0,i.Z)({},x("Title","title","text")),{},{validationRules:[p("title")]}),image:(0,i.Z)((0,i.Z)({},x("Image","image","file")),{},{validationRules:[p("image")]}),imageAlt:(0,i.Z)((0,i.Z)({},x("Image Alt","imageAlt","text")),{},{validationRules:[p("Image Alt")]}),body:(0,i.Z)((0,i.Z)({},x("Body","body","text")),{},{validationRules:[p("Body")]}),topic:(0,i.Z)((0,i.Z)({},x("Topic","topic","text")),{},{validationRules:[p("Topic")]}),tags:(0,i.Z)((0,i.Z)({},x("Tags","tags","text")),{},{validationRules:[p("Tags")]}),titleURL:(0,i.Z)((0,i.Z)({},x("titleURL","titleURL","titleURL")),{},{validationRules:[p("titleURL")]})},k={title:(0,i.Z)((0,i.Z)({},x("Title","title","text")),{},{validationRules:[p("title")]}),image:(0,i.Z)((0,i.Z)({},x("Image","image","file")),{},{validationRules:[p("image")]}),imageAlt:(0,i.Z)((0,i.Z)({},x("Image Alt","imageAlt","text")),{},{validationRules:[p("Image Alt")]}),body:(0,i.Z)((0,i.Z)({},x("Body","body","text")),{},{validationRules:[p("Body")]}),topic:(0,i.Z)((0,i.Z)({},x("Topic","topic","text")),{},{validationRules:[p("Topic")]}),tags:(0,i.Z)((0,i.Z)({},x("Tags","tags","text")),{},{validationRules:[p("Tags")]}),titleURL:(0,i.Z)((0,i.Z)({},x("titleURL","titleURL","titleURL")),{},{validationRules:[p("titleURL")]})},y={name:(0,i.Z)((0,i.Z)({},x("Name","name","text")),{},{validationRules:[p("name")]}),avatar:(0,i.Z)((0,i.Z)({},x("Image","image","file")),{},{validationRules:[p("image")]}),bio:(0,i.Z)((0,i.Z)({},x("Bio","bio","text")),{},{validationRules:[p("bio")]}),links:(0,i.Z)((0,i.Z)({},x("Social Links","links","text")),{},{validationRules:[p("links")]}),location:(0,i.Z)((0,i.Z)({},x("Location","location","text")),{},{validationRules:[p("location")]}),work:(0,i.Z)((0,i.Z)({},x("Work","work","text")),{},{validationRules:[p("work")]}),skills:(0,i.Z)((0,i.Z)({},x("Skills","skills","text")),{},{validationRules:[p("skills")]})},_=function(e){for(var t=0,a=Object.entries(e);t<a.length;t++){var l=(0,r.Z)(a[t],2),s=l[0],o=l[1];s in k&&("tags"===s?function(){var t=[];e[s].forEach((function(e){t.push(e.name)})),k=(0,i.Z)((0,i.Z)({},k),{},(0,n.Z)({},s,(0,i.Z)((0,i.Z)({},k[s]),{},{value:t,valid:!0})))}():k=(0,i.Z)((0,i.Z)({},k),{},(0,n.Z)({},s,(0,i.Z)((0,i.Z)({},k[s]),{},{value:o,valid:!0}))))}},C=function(e){for(var t=0,a=Object.entries(e);t<a.length;t++){var l=(0,r.Z)(a[t],2),s=l[0],o=l[1];s in y&&(y=(0,i.Z)((0,i.Z)({},y),{},(0,n.Z)({},s,(0,i.Z)((0,i.Z)({},y[s]),{},{value:o,valid:!0}))))}}},2562:function(){}}]);
//# sourceMappingURL=436.19faca2e.chunk.js.map